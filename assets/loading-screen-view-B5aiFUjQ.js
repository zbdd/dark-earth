import{c as m,g as h}from"./create-reactive-scope-BJRDMZKm.js";import{C as v,S as p,T as S}from"./index-DAm0RUrr.js";import{a as w}from"./solid-lwVvZ318.js";const T=d=>{const{viewModel:s}=d,e=new v;e.label="loading-screen-view",e.visible=!1;const t=p.from("load-level.jpg");t.label="loading-screen-sprite";const n=p.from("loading-screen-settlement.jpg");n.label="loading-screen-settlement-sprite",n.visible=s.isRestScreenVisible();const i=new S;i.label="loading-screen-title",i.text=s.text(),i.style={fontFamily:"alagard",fontSize:48,fill:"#ffffff",align:"center",stroke:"#000000",dropShadow:!0},i.position.set(t.width*.5-i.width*.5,t.height*.2+i.height*.5),e.addChild(t,i,n);const r=()=>{e.alpha=0,e.visible=!0,h.to(e,{alpha:1,duration:n.visible?6:1,ease:"power2.inOut"})},c=()=>{h.to(e,{alpha:0,duration:1,ease:"power2.inOut",onComplete:()=>{e.visible=!1}})},f=(a,l)=>{const o=Math.min(a/t.width,l/t.height);e.scale.set(o),e.position.set((a-t.width*o)*.5,(l-t.height*o)*.5)},b=async a=>{i.text="";const l=a.split("");for(const o of l)i.text+=o,await new Promise(g=>setTimeout(g,100));s.setText(a)};return m(()=>{w(()=>{if(f(innerWidth,innerHeight),e.visible===!1&&s.isVisible()){n.visible=s.isRestScreenVisible(),t.visible=!n.visible,r();const a=s.text();b(a)}else e.visible&&!s.isVisible()&&c()})},e),{view:e,show:r,hide:c,resize:f}};export{T as createLoadingScreenView};
