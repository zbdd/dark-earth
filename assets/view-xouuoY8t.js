import{C as b,S as T,T as A,a as k,G as x}from"./index-DDWQ-M5G.js";import{a as _}from"./solid-lwVvZ318.js";import{S as G,c as z}from"./sound-manager-Ab5qONKP.js";import{MENU_EVENT_EMITTER as f}from"./player-input-handler-BgsvB6jf.js";import{c as C,a as g}from"./modal-view-CFZeoxHD.js";import"./index-CH_iu5NA.js";const B=u=>{const{viewModel:o,width:w,height:v}=u,i=new b;let e,n,s;i.label="main-menu",i.eventMode="static";const t=T.from("main-menu.jpg");t.label="background-sprite",t.eventMode="static";const h=C({text:"DARK EARTH",borderSize:60,fontSize:96,onClick:void 0}),r=C({text:" START GAME",onClick:()=>{f.emit("ON_START_GAME_REQUESTED")}}),m=C({text:" CREDITS",onClick:()=>{n||o.setIsCreditsVisible(!0)}}),l=C({text:" AUTO SAVE",onClick:()=>{f.emit("ON_CONTINUE_GAME_REQUESTED",{autoSave:!0})}});l.visible=!1;const d=C({text:" LAST SAVE",onClick:()=>{f.emit("ON_CONTINUE_GAME_REQUESTED",{autoSave:!1})}});d.visible=!1;const a=new A;a.text="Zakath Games",a.style={fontFamily:"Arial",fontSize:32,fill:"white",align:"center",fontStyle:"italic"},a.eventMode="static",a.on("pointertap",()=>{window.open("https://zbdd.github.io","_blank")}),i.addChild(t,h,r,d,l,a,m),h.position.set(t.width*.5,t.height*.2),r.position.set(t.width*.5,t.height*.75),d.position.set(t.width*.5,t.height*.6),l.position.set(t.width*.5,t.height*.45),m.position.set(t.width*.5,t.height*.9),a.position.set(t.width*.77,t.height*.95);const c=(V,y)=>{const p=Math.min(V/t.width,y/t.height);i.scale.set(p),i.position.set((innerWidth-t.width*p)/2,(innerHeight-t.height*p)/2)},M=()=>{n=g({title:"Credits",contentStyle:{fill:"white",fontSize:14,wordWrap:!0,wordWrapWidth:300,fontFamily:"alagard"},content:`
Main Menu Music
-----------
"SCP-x7x (6th Floor)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/

New Game Intro Music
-----------
"SCP-x1x (Gateway to Hell)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/`,type:"Zakath Games",onClose:()=>{o.setIsCreditsVisible(!1)}}),i.addChild(n),n.scale.set(2),n.position.set(t.width*.5,(t.height-n.height)*.5)},S=()=>g({title:"Breaking Changes",contentStyle:{fill:"white",fontSize:20,wordWrap:!0,wordWrapWidth:400,fontFamily:"alagard"},content:`
This version of Dark Earth has breaking changes and progress from previous versions are not compatible.

Please start a new game to experience the latest features and improvements.`,type:"Zakath Games",onClose:()=>{k().log.lastVersion="1.1.2",o.setIsZakathUpdateVisible(!1)}}),E=()=>{e=g({title:"Confirmation",content:`Are you sure you want to proceed?

This will reset your game progress.

This action cannot be undone.`,type:"",onConfirm:()=>{f.emit("ON_START_GAME_REQUESTED"),e&&(i.removeChild(e),e.destroy({children:!0}),e=void 0),o.setIsConfirmationModalVisible(!1)},onCancel:()=>{e&&(i.removeChild(e),e.destroy({children:!0}),e=void 0),o.setIsConfirmationModalVisible(!1)}}),i.addChild(e),e.scale.set(2),e.position.set(t.width*.5,(t.height-e.height)*.5)};return c(w,v),G.playMusic("mx-title.mp3"),z(()=>{_(()=>{i.visible=o.isVisible(),o.isCreditsVisible()?n||M():n&&(i.removeChild(n),n.destroy({children:!0}),n=void 0),o.isZakathUpdateVisible()?(s||(s=S()),i.addChild(s),s.scale.set(2),s.position.set(t.width*.5,(t.height-s.height)*.5)):s&&(i.removeChild(s),s.destroy({children:!0}),s=void 0),o.isConfirmationModalVisible()?e||E():e&&(i.removeChild(e),e.destroy({children:!0}),e=void 0),r.visible=!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),d.visible=o.isContinueButtonVisible()&&!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),l.visible=o.isAutoSaveAvailable()&&!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),h.visible=!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),m.visible=!o.isConfirmationModalVisible()&&!o.isCreditsVisible()})},i),{view:i,resize:c}},L=u=>{const{viewModel:o,mainMenuVM:w,loadingScreenView:v}=u,i=new b;let e,n;i.label="game-view";const s=new x;i.addChild(s);const t=()=>{e&&(i.removeChild(e.view),e.view.destroy({children:!0}),e=void 0),n&&(i.removeChild(n.view),n.view.destroy({children:!0}),n=void 0)},h=()=>{s.clear(),s.rect(0,0,innerWidth,innerHeight),s.fill("black")},r=B({viewModel:w,width:o.viewDimensions().width,height:o.viewDimensions().height}),m=(a,c)=>{h(),r.resize(a,c),e==null||e.resize(a,c),n==null||n.resize(innerWidth,innerHeight,!0),v.resize(a,c)},l=a=>{e=a,i.addChildAt(e.view,i.children.length-2)},d=a=>{n=a,i.addChildAt(n.view,i.children.length-1)};return i.addChild(r.view,v.view),{view:i,attachCamera:l,attachUi:d,resize:m,detachAll:t}};export{L as createView};
