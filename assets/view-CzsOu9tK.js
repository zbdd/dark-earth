import{C as p,S as E,T as V,G as y}from"./index-Cp9DlFF6.js";import{a as T}from"./solid-lwVvZ318.js";import{S as A,c as x}from"./sound-manager-Jl7d4ffJ.js";import{MENU_EVENT_EMITTER as b}from"./player-input-handler-CEWpw10i.js";import{c as w,a as M}from"./modal-view-xIT0OIMU.js";const k=v=>{const{viewModel:n,width:f,height:m}=v,t=new p;let e,o;t.label="main-menu",t.eventMode="static";const i=E.from("main-menu.jpg");i.label="background-sprite",i.eventMode="static";const d=w({text:"DARK EARTH",borderSize:60,fontSize:96,onClick:void 0}),c=w({text:" START GAME",onClick:()=>{b.emit("ON_START_GAME_REQUESTED")}}),a=w({text:" CREDITS",onClick:()=>{o||n.setIsCreditsVisible(!0)}}),l=w({text:" CONTINUE",onClick:()=>{b.emit("ON_CONTINUE_GAME_REQUESTED")}});l.visible=!1;const r=new V;r.text="Zakath Games",r.style={fontFamily:"Arial",fontSize:32,fill:"white",align:"center",fontStyle:"italic"},r.eventMode="static",r.on("pointertap",()=>{window.open("https://zbdd.github.io","_blank")}),t.addChild(i,d,c,l,r,a),d.position.set(i.width*.5,i.height*.2),c.position.set(i.width*.5,i.height*.75),l.position.set(i.width*.5,i.height*.6),a.position.set(i.width*.5,i.height*.9),r.position.set(i.width*.7,i.height*.95);const C=(g,S)=>{const u=Math.min(g/i.width,S/i.height);t.scale.set(u),t.position.set((innerWidth-i.width*u)/2,(innerHeight-i.height*u)/2)},s=()=>{o=M({title:"Credits",contentStyle:{fill:"white",fontSize:14,wordWrap:!0,wordWrapWidth:300,fontFamily:"alagard"},content:`
Main Menu Music
-----------
"SCP-x7x (6th Floor)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/

New Game Intro Music
-----------
"SCP-x1x (Gateway to Hell)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/`,type:"Zakath Games",onClose:()=>{n.setIsCreditsVisible(!1)}}),t.addChild(o),o.scale.set(2),o.position.set(i.width*.5,(i.height-o.height)*.5)},h=()=>{e=M({title:"Confirmation",content:`Are you sure you want to proceed?

This will reset your game progress.

This action cannot be undone.`,type:"",onConfirm:()=>{b.emit("ON_START_GAME_REQUESTED"),e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),n.setIsConfirmationModalVisible(!1)},onCancel:()=>{e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),n.setIsConfirmationModalVisible(!1)}}),t.addChild(e),e.scale.set(2),e.position.set(i.width*.5,(i.height-e.height)*.5)};return C(f,m),A.playMusic("mx-title.mp3"),x(()=>{T(()=>{t.visible=n.isVisible(),n.isCreditsVisible()?o||s():o&&(t.removeChild(o),o.destroy({children:!0}),o=void 0),n.isConfirmationModalVisible()?e||h():e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),c.visible=!n.isConfirmationModalVisible()&&!n.isCreditsVisible(),l.visible=n.isContinueButtonVisible()&&!n.isConfirmationModalVisible()&&!n.isCreditsVisible(),d.visible=!n.isConfirmationModalVisible()&&!n.isCreditsVisible(),a.visible=!n.isConfirmationModalVisible()&&!n.isCreditsVisible()})},t),{view:t,resize:C}},N=v=>{const{viewModel:n,mainMenuVM:f,loadingScreenView:m}=v,t=new p;let e,o;t.label="game-view";const i=new y;t.addChild(i);const d=()=>{e&&(t.removeChild(e.view),e.view.destroy({children:!0}),e=void 0),o&&(t.removeChild(o.view),o.view.destroy({children:!0}),o=void 0)},c=()=>{i.clear(),i.rect(0,0,innerWidth,innerHeight),i.fill("black")},a=k({viewModel:f,width:n.viewDimensions().width,height:n.viewDimensions().height}),l=(s,h)=>{c(),a.resize(s,h),e==null||e.resize(s,h),o==null||o.resize(innerWidth,innerHeight,!0),m.resize(s,h)},r=s=>{e=s,t.addChildAt(e.view,t.children.length-2)},C=s=>{o=s,t.addChildAt(o.view,t.children.length-1)};return t.addChild(a.view,m.view),{view:t,attachCamera:r,attachUi:C,resize:l,detachAll:d}};export{N as createView};
