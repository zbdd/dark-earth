import{C as p,S as V,T,G as S}from"./index-DAm0RUrr.js";import{a as y}from"./solid-lwVvZ318.js";import{c as A}from"./create-reactive-scope-BJRDMZKm.js";import{MENU_EVENT_EMITTER as u}from"./player-input-handler-UupT_3io.js";import{c as v,S as k,a as M}from"./modal-view-BUapdlmx.js";const _=w=>{const{viewModel:n,width:f,height:m}=w,t=new p;let e,o;t.label="main-menu",t.eventMode="static";const i=V.from("main-menu.jpg");i.label="background-sprite",i.eventMode="static";const d=v({text:"DARK EARTH",borderSize:60,fontSize:96,onClick:void 0}),c=v({text:" START GAME",onClick:()=>{u.emit("ON_START_GAME_REQUESTED")}}),l=v({text:" CREDITS",onClick:()=>{o||n.setIsCreditsVisible(!0)}}),a=v({text:" CONTINUE",onClick:()=>{u.emit("ON_CONTINUE_GAME_REQUESTED")}});a.visible=!1;const r=new T;r.text="Zakath Games",r.style={fontFamily:"Arial",fontSize:32,fill:"white",align:"center",fontStyle:"italic"},r.eventMode="static",r.on("pointertap",()=>{window.open("https://zbdd.github.io","_blank")}),t.addChild(i,d,c,a,r,l),d.position.set(i.width*.5,i.height*.2),c.position.set(i.width*.5,i.height*.75),a.position.set(i.width*.5,i.height*.6),l.position.set(i.width*.5,i.height*.9),r.position.set(i.width*.7,i.height*.95);const C=(g,E)=>{const b=Math.min(g/i.width,E/i.height);t.scale.set(b),t.position.set((innerWidth-i.width*b)/2,(innerHeight-i.height*b)/2)},s=()=>{o=M({title:"Credits",content:`
Title music
-----------
"SCP-x7x (6th Floor)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/`,type:"Made by Zakath Games",onClose:()=>{n.setIsCreditsVisible(!1)}}),t.addChild(o),o.scale.set(2),o.position.set(i.width*.5,(i.height-o.height)*.5)},h=()=>{e=M({title:"Confirmation",content:`Are you sure you want to proceed?

This will reset your game progress.

This action cannot be undone.`,type:"",onConfirm:()=>{u.emit("ON_START_GAME_REQUESTED"),e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),n.setIsConfirmationModalVisible(!1)},onCancel:()=>{e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),n.setIsConfirmationModalVisible(!1)}}),t.addChild(e),e.scale.set(2),e.position.set(i.width*.5,(i.height-e.height)*.5)};return C(f,m),k.playMusic("mx-title.mp3"),A(()=>{y(()=>{t.visible=n.isVisible(),n.isCreditsVisible()?o||s():o&&(t.removeChild(o),o.destroy({children:!0}),o=void 0),n.isConfirmationModalVisible()?e||h():e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),c.visible=!n.isConfirmationModalVisible()&&!n.isCreditsVisible(),a.visible=n.isContinueButtonVisible()&&!n.isConfirmationModalVisible()&&!n.isCreditsVisible(),d.visible=!n.isConfirmationModalVisible()&&!n.isCreditsVisible(),l.visible=!n.isConfirmationModalVisible()&&!n.isCreditsVisible()})},t),{view:t,resize:C}},B=w=>{const{viewModel:n,mainMenuVM:f,loadingScreenView:m}=w,t=new p;let e,o;t.label="game-view";const i=new S;t.addChild(i);const d=()=>{e&&(t.removeChild(e.view),e.view.destroy({children:!0}),e=void 0),o&&(t.removeChild(o.view),o.view.destroy({children:!0}),o=void 0)},c=()=>{i.clear(),i.rect(0,0,innerWidth,innerHeight),i.fill("black")},l=_({viewModel:f,width:n.viewDimensions().width,height:n.viewDimensions().height}),a=(s,h)=>{c(),l.resize(s,h),e==null||e.resize(s,h),o==null||o.resize(innerWidth,innerHeight,!0),m.resize(s,h)},r=s=>{e=s,t.addChildAt(e.view,t.children.length-2)},C=s=>{o=s,t.addChildAt(o.view,t.children.length-1)};return t.addChild(l.view,m.view),{view:t,attachCamera:r,attachUi:C,resize:a,detachAll:d}};export{B as createView};
