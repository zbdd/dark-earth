import{C as p,S as V,T,G as A}from"./index-iGX2A3rm.js";import{a as y}from"./solid-lwVvZ318.js";import{S as _,c as x}from"./sound-manager-D50ZzWmb.js";import{MENU_EVENT_EMITTER as u}from"./player-input-handler-Cf1BD_4I.js";import{c as C,a as M}from"./modal-view-DpMOVA89.js";const k=w=>{const{viewModel:o,width:f,height:v}=w,t=new p;let e,n;t.label="main-menu",t.eventMode="static";const i=V.from("main-menu.jpg");i.label="background-sprite",i.eventMode="static";const c=C({text:"DARK EARTH",borderSize:60,fontSize:96,onClick:void 0}),h=C({text:" START GAME",onClick:()=>{u.emit("ON_START_GAME_REQUESTED")}}),r=C({text:" CREDITS",onClick:()=>{n||o.setIsCreditsVisible(!0)}}),l=C({text:" AUTO SAVE",onClick:()=>{u.emit("ON_CONTINUE_GAME_REQUESTED",{autoSave:!0})}});l.visible=!1;const d=C({text:" LAST SAVE",onClick:()=>{u.emit("ON_CONTINUE_GAME_REQUESTED",{autoSave:!1})}});d.visible=!1;const a=new T;a.text="Zakath Games",a.style={fontFamily:"Arial",fontSize:32,fill:"white",align:"center",fontStyle:"italic"},a.eventMode="static",a.on("pointertap",()=>{window.open("https://zbdd.github.io","_blank")}),t.addChild(i,c,h,d,l,a,r),c.position.set(i.width*.5,i.height*.2),h.position.set(i.width*.5,i.height*.75),d.position.set(i.width*.5,i.height*.6),l.position.set(i.width*.5,i.height*.45),r.position.set(i.width*.5,i.height*.9),a.position.set(i.width*.7,i.height*.95);const s=(S,E)=>{const b=Math.min(S/i.width,E/i.height);t.scale.set(b),t.position.set((innerWidth-i.width*b)/2,(innerHeight-i.height*b)/2)},m=()=>{n=M({title:"Credits",contentStyle:{fill:"white",fontSize:14,wordWrap:!0,wordWrapWidth:300,fontFamily:"alagard"},content:`
Main Menu Music
-----------
"SCP-x7x (6th Floor)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/

New Game Intro Music
-----------
"SCP-x1x (Gateway to Hell)" Kevin MacLeod (incompetech.com)
Licensed under Creative Commons: By Attribution 4.0 License
http://creativecommons.org/licenses/by/4.0/`,type:"Zakath Games",onClose:()=>{o.setIsCreditsVisible(!1)}}),t.addChild(n),n.scale.set(2),n.position.set(i.width*.5,(i.height-n.height)*.5)},g=()=>{e=M({title:"Confirmation",content:`Are you sure you want to proceed?

This will reset your game progress.

This action cannot be undone.`,type:"",onConfirm:()=>{u.emit("ON_START_GAME_REQUESTED"),e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),o.setIsConfirmationModalVisible(!1)},onCancel:()=>{e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),o.setIsConfirmationModalVisible(!1)}}),t.addChild(e),e.scale.set(2),e.position.set(i.width*.5,(i.height-e.height)*.5)};return s(f,v),_.playMusic("mx-title.mp3"),x(()=>{y(()=>{t.visible=o.isVisible(),o.isCreditsVisible()?n||m():n&&(t.removeChild(n),n.destroy({children:!0}),n=void 0),o.isConfirmationModalVisible()?e||g():e&&(t.removeChild(e),e.destroy({children:!0}),e=void 0),h.visible=!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),d.visible=o.isContinueButtonVisible()&&!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),l.visible=o.isAutoSaveAvailable()&&!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),c.visible=!o.isConfirmationModalVisible()&&!o.isCreditsVisible(),r.visible=!o.isConfirmationModalVisible()&&!o.isCreditsVisible()})},t),{view:t,resize:s}},I=w=>{const{viewModel:o,mainMenuVM:f,loadingScreenView:v}=w,t=new p;let e,n;t.label="game-view";const i=new A;t.addChild(i);const c=()=>{e&&(t.removeChild(e.view),e.view.destroy({children:!0}),e=void 0),n&&(t.removeChild(n.view),n.view.destroy({children:!0}),n=void 0)},h=()=>{i.clear(),i.rect(0,0,innerWidth,innerHeight),i.fill("black")},r=k({viewModel:f,width:o.viewDimensions().width,height:o.viewDimensions().height}),l=(s,m)=>{h(),r.resize(s,m),e==null||e.resize(s,m),n==null||n.resize(innerWidth,innerHeight,!0),v.resize(s,m)},d=s=>{e=s,t.addChildAt(e.view,t.children.length-2)},a=s=>{n=s,t.addChildAt(n.view,t.children.length-1)};return t.addChild(r.view,v.view),{view:t,attachCamera:d,attachUi:a,resize:l,detachAll:c}};export{I as createView};
